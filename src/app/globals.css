@tailwind base;
@tailwind components;
@tailwind utilities;

/* Modern Design System Tokens */
@theme {
  --font-sans: Inter, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

  /* Primary Color System - Modern Blue */
  --color-primary-50:  #eff6ff;
  --color-primary-100: #dbeafe;
  --color-primary-200: #bfdbfe;
  --color-primary-300: #93c5fd;
  --color-primary-400: #60a5fa;
  --color-primary-500: #3b82f6;
  --color-primary-600: #2563eb;
  --color-primary-700: #1d4ed8;
  --color-primary-800: #1e40af;
  --color-primary-900: #1e3a8a;

  /* Neutral Color System */
  --color-gray-50:  #f9fafb;
  --color-gray-100: #f3f4f6;
  --color-gray-200: #e5e7eb;
  --color-gray-300: #d1d5db;
  --color-gray-400: #9ca3af;
  --color-gray-500: #6b7280;
  --color-gray-600: #4b5563;
  --color-gray-700: #374151;
  --color-gray-800: #1f2937;
  --color-gray-900: #111827;

  /* Semantic Colors */
  --color-success-50:  #ecfdf5;
  --color-success-500: #10b981;
  --color-success-600: #059669;
  
  --color-warning-50:  #fffbeb;
  --color-warning-500: #f59e0b;
  --color-warning-600: #d97706;
  
  --color-error-50:   #fef2f2;
  --color-error-500:  #ef4444;
  --color-error-600:  #dc2626;

  /* Background Colors */
  --color-bg-primary: #ffffff;
  --color-bg-secondary: #f8fafc;
  --color-bg-tertiary: #f1f5f9;
  
  /* Text Colors */
  --color-text-primary: #0f172a;
  --color-text-secondary: #475569;
  --color-text-tertiary: #64748b;
  --color-text-quaternary: #94a3b8;

  /* Border Colors */
  --color-border-primary: #e2e8f0;
  --color-border-secondary: #cbd5e1;
  --color-border-focus: var(--color-primary-500);

  /* Shadow System */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);

  /* Border Radius */
  --radius-sm: 0.375rem;   /* 6px */
  --radius: 0.5rem;        /* 8px */
  --radius-md: 0.75rem;    /* 12px */
  --radius-lg: 1rem;       /* 16px */
  --radius-xl: 1.5rem;     /* 24px */
}

:root {
  color-scheme: light;
  
  /* Legacy aliases for backward compatibility */
  --color-brand: var(--color-primary-600);
  --color-brand-600: var(--color-primary-600);
  --color-brand-700: var(--color-primary-700);
  --color-brand-800: var(--color-primary-800);
  
  /* App background */
  --color-app-bg: var(--color-bg-secondary);
}

/* Dark mode variables for manual control */
.dark {
  color-scheme: dark;
  
  --color-bg-primary: #0f172a;
  --color-bg-secondary: #1e293b;
  --color-bg-tertiary: #334155;
  
  --color-text-primary: #f8fafc;
  --color-text-secondary: #cbd5e1;
  --color-text-tertiary: #94a3b8;
  --color-text-quaternary: #64748b;
  
  --color-border-primary: #334155;
  --color-border-secondary: #475569;
  
  --color-app-bg: var(--color-bg-secondary);
}

/* Fallback for system preference */
@media (prefers-color-scheme: dark) {
  :root:not(.light) {
    color-scheme: dark;
    
    --color-bg-primary: #0f172a;
    --color-bg-secondary: #1e293b;
    --color-bg-tertiary: #334155;
    
    --color-text-primary: #f8fafc;
    --color-text-secondary: #cbd5e1;
    --color-text-tertiary: #94a3b8;
    --color-text-quaternary: #64748b;
    
    --color-border-primary: #334155;
    --color-border-secondary: #475569;
    
    --color-app-bg: var(--color-bg-secondary);
  }
}

html, body {
  min-height: 100%;
  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
}

body {
  font-family: var(--font-sans);
  background: var(--color-app-bg);
  color: var(--color-text-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  -webkit-tap-highlight-color: transparent;
}

/* Modern Base Styles */
* {
  border-color: var(--color-border-primary);
}

/* Focus styles */
:focus-visible {
  outline: 2px solid var(--color-border-focus);
  outline-offset: 2px;
}

/* Selection styles */
::selection {
  background-color: var(--color-primary-200);
  color: var(--color-primary-900);
}

/* Scrollbar styles */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: var(--color-gray-100);
}

::-webkit-scrollbar-thumb {
  background: var(--color-gray-300);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-gray-400);
}

/* Apply safe-area only when running as a PWA on iOS/Android */
@media (display-mode: standalone) {
  body {
    /* Don't apply padding to body directly as it affects all content */
    /* Instead, we'll handle safe areas in specific components */
  }
  
  /* Add safe area padding to the root container */
  #root, #__next {
    padding-top: env(safe-area-inset-top);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

/* Sticky header helper */
.sticky-header { position: sticky; top: 0; z-index: 40; }

/* ===== Floating Action Button (FAB) =====
   Add either class="app-fab" or data-fab to your FAB button.
*/
.app-fab { position: fixed; z-index: 30; }

/* Hide FAB whenever any modal sets the modal-open flag */
html.modal-open .app-fab,
body.modal-open .app-fab,
html.modal-open [data-fab],
body.modal-open [data-fab] {
  display: none !important;
}

/* iOS momentum scrolling helper */
.touch-scroll { -webkit-overflow-scrolling: touch; touch-action: pan-y; }

/* Optional safe-area utilities (use only if you don't rely on the global @media block) */
.safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
.safe-top    { padding-top: env(safe-area-inset-top); }

/* --- Safe-area CSS variables (default 0) --- */
:root {
  --safe-top: 0px;
  --safe-right: 0px;
  --safe-bottom: 0px;
  --safe-left: 0px;
}

@media (display-mode: standalone) {
  :root {
    --safe-top: env(safe-area-inset-top);
    --safe-right: env(safe-area-inset-right);
    --safe-bottom: env(safe-area-inset-bottom);
    --safe-left: env(safe-area-inset-left);
  }
}

/* Optional utilities for fixed/sticky chrome */
@media (display-mode: standalone) {
  .safe-area-t { padding-top: var(--safe-top); }
  .safe-area-b { padding-bottom: var(--safe-bottom); }
  .safe-area-x { padding-left: var(--safe-left); padding-right: var(--safe-right); }
}

/* ===== Modern Component Styles ===== */

/* Modern Component Styles - Tailwind v3 Compatible */

/* Modern Button Styles */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none;
  }

  .btn-primary {
    @apply btn bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 shadow-sm;
  }

  .btn-secondary {
    @apply btn bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-primary-500 shadow-sm;
  }

  .btn-ghost {
    @apply btn text-gray-700 hover:bg-gray-100 focus:ring-primary-500;
  }

  .btn-danger {
    @apply btn bg-error-500 text-white hover:bg-error-600 focus:ring-error-500 shadow-sm;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-sm;
  }

  .btn-md {
    @apply px-4 py-2 text-sm;
  }

  .btn-lg {
    @apply px-6 py-3 text-base;
  }

  /* Modern Card Styles */
  .card {
    @apply bg-white rounded-xl border border-gray-200 shadow-sm dark:bg-gray-800 dark:border-gray-700;
  }

  .card-hover {
    @apply card transition-all duration-200 hover:shadow-md hover:border-gray-300 dark:hover:border-gray-600;
  }

  .card-padding {
    @apply p-4 md:p-6;
  }

  /* Modern Input Styles */
  .input {
    @apply w-full rounded-lg border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 transition-colors focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 disabled:bg-gray-50 disabled:text-gray-500 bg-white text-gray-900 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-100 dark:placeholder-gray-400 dark:focus:border-primary-400 disabled:dark:bg-gray-900 disabled:dark:text-gray-600;
  }

  .input-error {
    @apply input border-error-500 focus:border-error-500 focus:ring-error-500;
  }

  /* Modern Badge Styles */
  .badge {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium;
  }

  .badge-primary {
    @apply badge bg-primary-100 text-primary-800;
  }

  .badge-success {
    @apply badge bg-green-50 text-green-700 dark:bg-green-900/20 dark:text-green-400;
  }

  .badge-warning {
    @apply badge bg-yellow-50 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400;
  }

  .badge-error {
    @apply badge bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400;
  }

  .badge-gray {
    @apply badge bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300;
  }

  .badge-orange {
    @apply badge bg-orange-50 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400;
  }

  .badge-blue {
    @apply badge bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400;
  }

  /* Modern Table Styles */
  .table {
    @apply w-full text-sm text-left;
  }

  .table-header {
    @apply bg-gray-50 text-xs font-medium text-gray-500 uppercase tracking-wider dark:bg-gray-700 dark:text-gray-400;
  }

  .table-row {
    @apply border-t border-gray-200 hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-800;
  }

  .table-cell {
    @apply px-3 py-3.5 whitespace-nowrap;
  }

  /* Modern Modal Overlay */
  .modal-overlay {
    @apply fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4;
  }

  .modal-content {
    @apply bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-hidden dark:bg-gray-800;
  }

  /* Modern Sidebar Styles */
  .sidebar {
    @apply bg-white border-r border-gray-200 dark:bg-gray-800 dark:border-gray-700;
  }

  .sidebar-item {
    @apply flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors;
  }

  .sidebar-item-active {
    @apply sidebar-item bg-primary-50 text-primary-700 border border-primary-200 dark:bg-primary-900/20 dark:text-primary-300 dark:border-primary-800;
  }

  .sidebar-item-inactive {
    @apply sidebar-item text-gray-700 hover:bg-gray-50 border border-transparent dark:text-gray-300 dark:hover:bg-gray-700;
  }
}
